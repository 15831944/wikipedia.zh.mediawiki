{{校对翻译}}
{{current|date=2018年1月}}
{{NoteTA
|G1 = IT
}}
[[File:Spectre_logo_with_text.svg|thumb]]
'''幽灵'''（{{lang-en|Spectre}}）是一个存在于[[分支预测|分支预测]]实现中的[[计算机安全隐患|硬件缺陷及安全漏洞]]，含有[[预测执行|预测执行]]功能的现代[[微处理器|微处理器]]均受其影响<ref name=wired1>{{cite web |last=Greenberg |first=Andy |url = https://www.wired.com/story/critical-intel-flaw-breaks-basic-security-for-most-computers/ |title=A Critical Intel Flaw Breaks Basic Security for Most Computers |date=January 3, 2018 |work=[[连线|连线]] |accessdate=January 3, 2018 |deadurl=no |archiveurl=https://web.archive.org/web/20180103204011/https://www.wired.com/story/critical-intel-flaw-breaks-basic-security-for-most-computers/ |archivedate=January 3, 2018  }}</ref><ref name="AT-20180105">{{cite web |author-last=Bright |author-first=Peter |author-link=Peter Bright |title=Meltdown and Spectre: Here's what Intel, Apple, Microsoft, others are doing about it |url=https://arstechnica.com/gadgets/2018/01/meltdown-and-spectre-heres-what-intel-apple-microsoft-others-are-doing-about-it/ |date=2018-01-05 |work=[[Ars_Technica|Ars Technica]] |access-date=2018-01-06 |dead-url=no |archive-url=https://web.archive.org/web/20180527032912/https://arstechnica.com/gadgets/2018/01/meltdown-and-spectre-heres-what-intel-apple-microsoft-others-are-doing-about-it/ |archive-date=2018-05-26}}</ref>，[[漏洞利用|漏洞利用]]是基於時間的[[旁路攻擊|旁路攻擊]]，允许恶意[[进程|进程]]獲得其他程序在[[虚拟内存|映射内存]]中的資料内容。<ref name="MeltdownSpectre">{{Cite web |author=Staff |url=https://spectreattack.com/ |title=Meltdown and Spectre |date=2018 |work=[[Graz_University_of_Technology|Graz University of Technology]] |accessdate=January 3, 2018 |deadurl=no |archiveurl=https://web.archive.org/web/20180103221345/https://spectreattack.com/ |archivedate=January 3, 2018  }}</ref><ref name="NYT-20180103">{{Cite news|url=https://www.nytimes.com/2018/01/03/business/computer-flaws.html|title=Researchers Discover Two Major Flaws in the World’s Computers|last=Metz|first=Cade|date=January 3, 2018|work=[[纽约时报|纽约时报]]|accessdate=January 3, 2018|last2=Perlroth|first2=Nicole|language=en-US|issn=0362-4331|deadurl=no|archiveurl=https://web.archive.org/web/20180103224048/https://www.nytimes.com/2018/01/03/business/computer-flaws.html|archivedate=January 3, 2018}}</ref><ref>{{Cite news |last=Warren |first=Tom |url=https://www.theverge.com/2018/1/3/16844630/intel-processor-security-flaw-bug-kernel-windows-linux |title=Intel’s processors have a security bug and the fix could slow down PCs |date=January 3, 2018 |work=[[The_Verge|The Verge]] |accessdate=January 3, 2018 |deadurl=no |archiveurl=https://web.archive.org/web/20180103141306/https://www.theverge.com/2018/1/3/16844630/intel-processor-security-flaw-bug-kernel-windows-linux |archivedate=January 3, 2018  }}</ref>Spectre是一系列的漏洞，基於攻擊行爲類型，賦予了两个[[通用漏洞披露|通用漏洞披露]]ID，分别是{{CVE|2017-5753}}（bounds check bypass，边界检查绕过）和{{CVE|2017-5715}}（branch target injection，分支目标注入），於2018年1月隨同另一個也基於推測執行機制的、屬於重量級資訊安全漏洞的硬體缺陷「Meltdown」（熔燬）一同公佈。由於該缺陷是推測執行機制導致的，加上不同處理器架構對推測執行又有不同的實作方式，因此這個缺陷無法獲得根源上的修復而只能採取「見招拆招」式的方法防範，而且因機制所致，各種解決方案還有不可預料的效能下降。<ref>{{cite web|title=Ben Thomposn：「幽靈」與「熔毀」漏洞映射出了科技行業的現狀|url=https://www.hksilicon.com/articles/1515540|language=zh-TW}}</ref>

CVE-2017-5753依赖于運行中的[[即时编译|即时编译]]（JIT）系統，用于[[Javascript|Javascript]]的JIT引擎已被发现存在此漏洞。网站可以读取浏览器中存储的另一个网站的数据，或者浏览器本身的内存。對此Firefox 57.0.4（部分）及Chrome 64通过为每个网站分配专用的浏览器进程来阻擋此類攻擊<ref name=mozilla-1801>[https://www.mozilla.org/en-US/security/advisories/mfsa2018-01/ Mozilla Foundation Security Advisory 2018-01]</ref><ref>[https://www.theregister.co.uk/2018/01/04/intel_amd_arm_cpu_vulnerability/ https://www.theregister.co.uk/2018/01/04/intel_amd_arm_cpu_vulnerability/ Meltdown, Spectre: The password theft bugs at the heart of Intel CPUs], the Register, 2018-01-04.</ref>；作業系統則是通過改寫的編譯器重新編譯以阻擋利用該漏洞進行攻擊的行爲。

針對CVE-2017-5715，除了軟體層面上進行修改以外，處理器也需要通過[[微碼|微碼]]更新來阻擋這類攻擊。<ref name="imc_update_ms0">{{cite web |title=KB4091663：Intel 微碼更新 |url=https://support.microsoft.com/zh-tw/help/4091663/kb4091663-intel-microcode-updates |website=微軟}}</ref><ref name="imc_update_ms1">{{cite web |title=推出更新，以啟用防範 Spectre Variant 2 的緩和措施 |url=https://support.microsoft.com/zh-tw/help/4078407/update-to-enable-mitigation-against-spectre-variant-2 |website=微軟}}</ref><ref>{{cite web |title=KB4090007：Intel 微碼更新 |url=https://support.microsoft.com/zh-tw/help/4090007/intel-microcode-updates |website=support.microsoft.com}}</ref>

隨著幽靈缺陷衍生的安全漏洞（攻擊手段變體，包括{{CVE|2018-3693}}、{{CVE|2018-3640}}、{{CVE|2018-3639}}等）被逐一發現，英特爾等CPU開發商不得不在修復既有缺陷的同時資助第三方資訊安全團隊繼續發掘潛在的缺陷以破財消災。<ref>{{cite web |title=New Spectre 1.1 and Spectre 1.2 CPU Flaws Disclosed |url=https://www.bleepingcomputer.com/news/security/new-spectre-11-and-spectre-12-cpu-flaws-disclosed/ |website=BleepingComputer |language=en-us}}</ref>

== 历史 ==
Spectre由[[Google|Google]] [[Project_Zero_(Google)|Project Zero]]的Jann Horn独立发现，{{le|Paul Kocher}}协同<!-- (in alphabetical order) -->Daniel Genkin、Mike Hamburg、Moritz Lipp和Yuval Yarom也合作发现了此问题。微软漏洞研究（Microsoft Vulnerability Research）则将此问题的波及范围扩展到了浏览器JavaScript的JIT引擎<ref name="MeltdownSpectre" /><ref name="mozilla-1801"/>。2017年6月1日，受影响的硬件供应商知悉此问题。2018年1月3日，此漏洞与另一安全漏洞[[熔毁_(安全漏洞)|熔毁]]（{{lang-en|Meltdown}}）被一同公布<ref name="Gibbs_20180104">{{cite web |url=https://www.theguardian.com/technology/2018/jan/04/meltdown-spectre-worst-cpu-bugs-ever-found-affect-computers-intel-processors-security-flaw |title=Meltdown and Spectre: ‘worst ever’ CPU bugs affect virtually all computers |author-first=Samuel |author-last=Gibbs |publisher=[[衛報|衛報]] |date=2018-01-04 |access-date=2018-01-06 |dead-url=no |archive-url=https://web.archive.org/web/20180106114401/https://www.theguardian.com/technology/2018/jan/04/meltdown-spectre-worst-cpu-bugs-ever-found-affect-computers-intel-processors-security-flaw |archive-date=2018-01-06}}</ref>。

== 细节 ==
Spectre是一个可以迫使用户[[操作系统|操作系统]]上的其他程序访问其程序[[電腦記憶體|電腦記憶體]]空间中任意位置的漏洞。

Spectre不是单个易于修复的漏洞，而是<ref name="SpectrePaper">{{cite web|title=Spectre Attacks: Exploiting Speculative Execution|url=https://spectreattack.com/spectre.pdf|date=2018|deadurl=no|archiveurl=https://web.archive.org/web/20180103225843/https://spectreattack.com/spectre.pdf|archivedate=January 3, 2018}}</ref>一类<ref>{{cite web|title=Reading privileged memory with a side-channel|url=https://googleprojectzero.blogspot.fi/2018/01/reading-privileged-memory-with-side.html|date=2018|deadurl=no|archiveurl=https://web.archive.org/web/20180104115801/https://googleprojectzero.blogspot.fi/2018/01/reading-privileged-memory-with-side.html|archivedate=January 4, 2018}}</ref>潜在漏洞的总和。它们都利用了一种现代[[微处理器|微处理器]]为降低[[内存延迟|内存延迟]]、加快执行速度的常用方法“[[预测执行|预测执行]]”的[[函数副作用|副作用]]。具体而言，Spectre着重于[[分支预测|分支预测]]，这是预测执行的一部分。与同时披露的相关漏洞“熔毁”不同，Spectre不依赖单个处理器上[[記憶體管理|記憶體管理]]及系统保护的特定功能，而是一个更为通用的漏洞。

白皮书的出发点是，对分支预测机制进行边信道定时攻击<ref name="MozillaTimingBlog">{{cite web|title=Mitigations landing for new class of timing attack|url=https://blog.mozilla.org/security/2018/01/03/mitigations-landing-new-class-timing-attack/|date=2018|deadurl=no|archiveurl=https://web.archive.org/web/20180104180058/https://blog.mozilla.org/security/2018/01/03/mitigations-landing-new-class-timing-attack/|archivedate=January 4, 2018}}</ref>，它是现代微处理器乱序执行的一部分。虽然，处理器的文档保证在[[计算机系统结构|架构]]级别，预测错误所导致的任何后果都会在得到正确结果之后取消，然而预测执行仍然有可能留下副作用，例如已加载的[[CPU缓存|缓存]]线。这些所谓的[[非功能性需求|非功能性]]方面随后便可影响计算环境。如果这种副作用（包括但不限于内存访问时间）对恶意程序可见，并且能设法与受害[[行程|行程]]所保存的敏感数据产生关系，则这些副作用可能会使[[信息敏感度|敏感数据]]可被识别。即使在架构级别，正式的安全设计能正常工作，这种情况仍然会发生；这种情况下，用于代码执行的、[[抽象層|较低级的]][[微架構|微架構]]优化仍然有可能泄漏对正常程序正确执行不是非常重要的某些信息。

Spectre论文展示了完成攻击的四个基本步骤：

#首先，论文阐述了在现代处理器中的，恶意程序可以通过程序内部的运行操纵分支预测逻辑，使得分支预测命中或者失败的情况可以提前判断。
#随后展示了，可以可靠地对缓存命中和未命中间的差异进行计时，因此，本来应该是简单的非功能差异，实际却可作为秘密信道，从无关信息中提取进程的内部工作信息。
#然后，论文以一个简单的示例程序和一个在[[网页浏览器|浏览器]][[沙盒_(電腦安全)|沙盒]]中运行的[[JavaScript|JavaScript]]片段为基础，将结果与[[返回导向编程|返回导向编程]]攻击等原理进行综合；在这两种情况下，只需简单使用由普通编译器或现有浏览器中[[JavaScript引擎|JavaScript引擎]]生成的代码，利用其中条件分支的预测执行，受害者进程的整个地址空间（即运行中程序的内容）都将可读。其基本思想是，在现有的代码中寻找预测执行可能涉及到不可访问数据的地方，操纵处理器，使得预测执行必须触及该数据的实际内容，然后对处理器的副作用计时，这时预取机制已经加载完成了一条缓存线，结果就是访问这条缓存线的数据速度会更快。
#最后，本文将这种攻击一般化到受害进程的任何非功能状态上。紧接着讨论了甚至像[[内存总线|总线]][[仲裁_(电子)|仲裁]][[延迟_(工程学)|延迟]]这样非常不明显的非功能性效应。

Spectre和Meltdown之间的根本区别在于，后者依赖于现代英特尔处理器的特定功能：CPU可能会被诱使预测执行到受保护的系统数据中，被迫进入并处理相关的安全异常。Spectre中的统计学特征更为明显：尽最大努力以某种方式调教处理器的分支预测机制，并使用现有库中可用（或不可用）的代码来实现基本相同的事。

或者换句话说，正如Meltdown论文所说的那样：“Meltdown在几个方面与Spectre攻击有所不同，其中值得注意的是，Spectre需要定制受害者进程的软件环境，但适用的CPU更加广泛，并且[[内核页表隔离|KAISER]]对其无效。”<ref name="MeltdownPaper">{{cite web|title=Meltdown|url=https://meltdownattack.com/meltdown.pdf|date=2018|deadurl=no|archiveurl=https://web.archive.org/web/20180104180746/https://meltdownattack.com/meltdown.pdf|archivedate=January 4, 2018}}</ref>

== 影响 ==
截至2018年，几乎所有的计算机系统都受到Spectre的影响，包括台式机、笔记本电脑和移动设备。具体而言，Spectre已证明可以在主要的[[Intel|Intel]]、部分[[ARM架構|ARM]]的处理器上工作，特定情況下則在[[AMD|AMD]]架構下能運作<ref>{{Cite web|author=Staff|url=https://spectreattack.com/#faq-systems-spectre|title=Meltdown and Spectre-faq-systems-spectre|date=2018|work=[[Graz_University_of_Technology|Graz University of Technology]]|language=en|accessdate=January 4, 2018|deadurl=no|archiveurl=https://web.archive.org/web/20180103233556/https://spectreattack.com/#faq-systems-spectre|archivedate=January 3, 2018}}</ref><ref>{{cite web|last1=Busvine|first1=Douglas|last2=Nellis|first2=Stephen|title=Security flaws put virtually all phones, computers at risk|url=https://www.reuters.com/article/us-cyber-intel/security-flaws-put-virtually-all-phones-computers-at-risk-idUSKBN1ES1BO|date=January 3, 2018|website=Reuters|publisher=Thomson-Reuters|accessdate=January 3, 2018|ref=busvined_nelliss|deadurl=no|archiveurl=https://web.archive.org/web/20180103232451/https://www.reuters.com/article/us-cyber-intel/security-flaws-put-virtually-all-phones-computers-at-risk-idUSKBN1ES1BO|archivedate=January 3, 2018}}</ref>。英特尔正式回应了所报告的安全漏洞<ref name="Intel-20180103">{{cite web |author=Staff |title=Intel Responds To Security Research Findings |url=https://newsroom.intel.com/news/intel-responds-to-security-research-findings/ |date=January 3, 2018 |work=[[Intel|Intel]] |accessdate=January 4, 2018 |deadurl=no |archiveurl=https://web.archive.org/web/20180103211746/https://newsroom.intel.com/news/intel-responds-to-security-research-findings/ |archivedate=January 3, 2018  }}</ref>。根据AMD的一份声明，Spectre第二个变种没有发生在AMD处理器上，且由于AMD架构之间存在差异，“风险接近于零”<ref name="AMD statement"/>。

目前，Spectre只会造成用户级别的程序互相影响，但似乎这种攻击方式可以进一步开发。虽然比[[熔毁_(安全漏洞)|熔毁]]更难正确使用，但由于它的一般性，Spectre可能会更加难以抵御。原来的白皮书甚至推测，为了完全处理这个问题，可能需要对微处理器体系结构进行重大改变。

而且，对于[[云提供商|云提供商]]而言，Spectre比Meltdown影响更大。Meltdown可使未经授权的应用程序读取特权内存，并获取运行在同一云服务器上进程的敏感数据，而Spectre可让恶意程序诱使[[虚拟机管理程序|虚拟机管理程序]]将数据传输到在其上运行的客户系统<ref>{{cite web|last1=Fox-Brewster|first1=Thomas|title=Massive Intel Vulnerabilities Just Landed -- And Every PC User On The Planet May Need To Update|url=https://www.forbes.com/sites/thomasbrewster/2018/01/03/intel-meltdown-spectre-vulnerabilities-leave-millions-open-to-cyber-attack/|date=January 3, 2018|website=Forbes|publisher=Forbes Media LLC.|accessdate=January 3, 2018|ref=foxbt|deadurl=no|archiveurl=https://web.archive.org/web/20180103221558/https://www.forbes.com/sites/thomasbrewster/2018/01/03/intel-meltdown-spectre-vulnerabilities-leave-millions-open-to-cyber-attack/|archivedate=January 3, 2018}}</ref>。

== 防御措施 ==
由于Spectre是一整类的攻击，所以一个补丁很可能无法完全解决。虽然这个漏洞的一些特殊案例已经在处理，但专门介绍“Spectre”和“Meltdown”的网站也说：“Spectre不易修复，所以会长期困扰我们。”<ref name="MeltdownSpectre" />微软 Windows 系列操作系统于2018年初发布了系统补丁，英特尔公司于事件发生阶段反复表示修复漏洞对性能影响不大，但微软测试表明若安裝Windows 7、Windows 8 操作系统、並使用2015年或更早出厂的英特尔芯片，更新后速度會明显变慢，慢到用户能感受到差异，也有说法是性能约下降30%，尤其是较旧的Haswell架构及之前芯片。但若是安装Windows 10并使用Skylake、Kaby Lake等之后更新版英特尔芯片，则性能下降状况并不明显。<ref>[https://www.moneydj.com/KMDJ/News/NewsViewer.aspx?a=fb5e7bc2-42be-4465-9619-de0b8964b582  安全漏洞作祟、微軟：更新會拖慢電腦]</ref>

尽管如此，已有几个程序帮助保护家庭计算机和相关设备免于“Meltdown”和“Spectre”漏洞的攻击<ref name="NYT-20180104">{{cite news |last1=Metz |first1=Cade |last2=Chen |first2=Brian X. |title=What You Need to Do Because of Flaws in Computer Chips 
|url = https://www.nytimes.com/2018/01/04/technology/meltdown-spectre-questions.html  |date=January 4, 2018 |work=[[The_New_York_Times|The New York Times]] |accessdate=January 5, 2018 }}</ref><ref name="FM-20180105">{{cite web |last=Pressman |first=Aaron |title=Why Your Web Browser May Be Most Vulnerable to Spectre and What to Do About It |url=http://fortune.com/2018/01/05/spectre-safari-chrome-firefox-internet-explorer/ |date=January 5, 2018 |work=[[Fortune_(magazine)|Fortune (magazine)]] |accessdate=January 5, 2018 }}</ref><ref name="PCW-20180104">{{cite web |last=Chacos |first=Brad |title=How to protect your PC from the major Meltdown and Spectre CPU flaws |url = https://www.pcworld.com/article/3245810/security/how-to-protect-your-pc-meltdown-spectre-cpu-flaws.html |date=January 4, 2018 |work=[[PC_World|PC World]] |accessdate=January 4, 2018 |deadurl=no |archiveurl = https://web.archive.org/web/20180104231745/https://www.pcworld.com/article/3245810/security/how-to-protect-your-pc-meltdown-spectre-cpu-flaws.html |archivedate=January 4, 2018  }}</ref><ref name="CNET-20180104">{{cite web |last=Elliot |first=Matt |title = Security - How to protect your PC against the Intel chip flaw - Here are the steps to take to keep your Windows laptop or PC safe from Meltdown and Spectre. |url = https://www.cnet.com/how-to/how-to-protect-your-pc-against-the-intel-chip-flaw/ |date=January 4, 2018 |work=[[CNET|CNET]] |accessdate=January 4, 2018 |deadurl=no |archiveurl=https://web.archive.org/web/20180104225045/https://www.cnet.com/how-to/how-to-protect-your-pc-against-the-intel-chip-flaw/ |archivedate=January 4, 2018  }}</ref>。

嵌入在网站中的JavaScript也可用于攻击<ref name="SpectrePaper" />。[[Google_Chrome|Chrome]] 64将默认包含针对此攻击的缓解措施，Chrome 63用户可以通过启用站点隔离功能（chrome://flags#enable-site-per-process）手动缓解攻击<ref>{{Cite web |url = https://support.google.com/faqs/answer/7622138#chrome |title=Google’s Mitigations Against CPU Speculative Execution Attack Methods |last=|first=|date=|website=support.google.com|language=en |archive-url = https://web.archive.org/web/20180103231642/https://support.google.com/faqs/answer/7622138#chrome |archive-date=January 3, 2018 |dead-url=no|access-date=January 4, 2018}}</ref>。在[[Firefox|Firefox]] 57.0.4中，[[Mozilla|Mozilla]]正在降低JavaScript计时器的精度，以帮助防止计时攻击，同时计划用于将来版本的时间模糊技术也在工作中<ref name="mozilla-1801"/><ref>{{Cite web |url = https://blog.mozilla.org/security/2018/01/03/mitigations-landing-new-class-timing-attack/ |title=Mitigations landing for new class of timing attack |website=Mozilla Security Blog|language=en-US|access-date=January 4, 2018|deadurl=no|archiveurl=https://web.archive.org/web/20180104003111/https://blog.mozilla.org/security/2018/01/03/mitigations-landing-new-class-timing-attack/ |archivedate=January 4, 2018 }}</ref>。此外，基于浏览器的漏洞利用可以通过禁用JavaScript（例如[[NoScript|NoScript]]）防止。{{Citation needed|date=January 2018}}

2018年1月4日，Google在其安全博客上详细介绍了新技术“Retpoline”，该技术能够以微不足道的处理器开销克服Spectre漏洞。它涉及在编译器编译时让间接分支跳转到不同的目标，减少易受攻击的乱序执行发生<ref>{{cite web |url = https://security.googleblog.com/2018/01/more-details-about-mitigations-for-cpu_4.html |title=More details about mitigations for the CPU Speculative Execution issue|author=|date=|publisher=|deadurl=no |archiveurl = https://web.archive.org/web/20180105022207/https://security.googleblog.com/2018/01/more-details-about-mitigations-for-cpu_4.html |archivedate=January 5, 2018 }}</ref><ref>{{cite web |url = https://tech.slashdot.org/story/18/01/04/2230207/google-says-cpu-patches-cause-negligible-impact-on-performance-with-new-retpoline-technique#comments|title=Google Says CPU Patches Cause 'Negligible Impact On Performance' With New 'Retpoline' Technique - Slashdot |author=|date= |website=tech.slashdot.org }}</ref>。虽然这项技术面向x86指令集开发，Google工程师认为该技术也可以用于其他处理器<ref>{{cite web |url = https://support.google.com/faqs/answer/7625886 |title=Retpoline: a software construct for preventing branch-target-injection - Google Help |author=|date=|website=support.google.com|deadurl=no|archiveurl=https://web.archive.org/web/20180105030824/https://support.google.com/faqs/answer/7625886|archivedate=January 5, 2018}}</ref>。2019年2月，Google研究人员发表论文认为光靠软件不能完全避开Spectre漏洞，必须对CPU设计进行修改才能避免<ref>{{cite journal |last1=Mcilroy |first1=Ross |last2=Sevcik |first2=Jaroslav |last3=Tebbi |first3=Tobias |last4=Titzer |first4=Ben L. |last5=Verwaest |first5=Toon |title=Spectre is here to stay: An analysis of side-channels and speculative execution |journal=arXiv:1902.05178 [cs] |date=2019-02-13 |url=https://arxiv.org/abs/1902.05178}}</ref>。

也有人提出<ref>{{cite web |url = https://www.howtogeek.com/338269/a-huge-intel-security-hole-could-slow-down-your-pc-soon/ |title=How Will the Meltdown and Spectre Flaws Affect My PC?|website=How-To Geek}}</ref>，在有选择性刷新轉譯後備緩衝區（TLB）功能的处理器上，可以减少修补漏洞造成的性能损失。该特性在Intel 64架构下称为进程上下文标识符（PCID），而在Alpha下称为地址空间号码（ASN）。这是因为，选择性刷新可隔离进程，及对漏洞至关重要的[[轉譯後備緩衝區|轉譯後備緩衝區]]（TLB）行为，而不会不断刷新整个TLB，这是性能损失的主要原因。<ref>{{cite web |title=Meltdown 與 Spectre 的最新修補狀況如何了？如何評量效能降低程度？ |url=https://technews.tw/2018/03/25/intel-publishes-spectre-meltdown-hardware-plans/ |website=TechNews 科技新報 |language=zh-TW}}</ref>

=== 微碼、韌體更新 ===
對於幽靈的變體2——分支目標註入，除了軟體的規避阻擋措施外，還至少需要受影響的處理器獲得微碼更新或韌體修復程式。<ref>{{cite web |last1=US |first1=Dell |title=微处理器旁路攻击分析漏洞支持 |url=http://www.dell.com/support/contents/cn/zh/cndhs1/article/product-support/self-support-knowledgebase/software-and-downloads/speculative-store-bypass |website=戴爾 |language=zh-CN}}</ref>受缺陷影響最大的英特爾已經爲新近出貨和一些較老的處理器推出微碼更新<ref>{{cite web |title=microcode  revision guidance |url=https://newsroom.intel.com/wp-content/uploads/sites/11/2018/04/microcode-update-guidance.pdf |publisher=Intel}}</ref><ref>{{cite web |title=Intel 處理器微碼更新進度報告：修復至第六代 Core 處理器 Skylake，下一步將延伸至 Sandy Bridge |url=https://www.techbang.com/posts/56925-intel-processor-microcode-update-progress-report-fixed-to-sixth-generation-core-processor-skylake-next-step-extends-to-sandy-bridge |language=zh-tw |date=2018-02-23}}</ref>，但是該措施通常需要主機板廠商的配合，以便將處理器廠商提供的微碼更新整合至其主機板的BIOS/EFI韌體上，因此會出現一些較老的、早已不享有保固服務的主機板沒有獲得微碼更新的情況；而部分較老的處理器，也是未能獲得微碼更新。<ref>{{cite web |title=Intel 停止舊款處理器 Spectre 漏洞安全性更新 |url=technews.tw/2018/04/07/intel-stop-spectre-update-for-old-cpu/ |website=TechNews 科技新報 |language=zh-TW}}</ref>對於一些主機板廠商未有發佈帶微碼更新韌體，但處理器廠商已經推出微碼更新修復程式的，有的使用者會嘗試以自製主機板韌體的方式安裝微碼更新。<ref>{{cite web |title=Intel 處理器微碼更新進度報告：Broadwell 與 Haswell 修正完畢釋出，附贈 UBU 更新微碼教學 |url=https://www.techbang.com/posts/57062-intel-processor-microcode-update-progress-report-broadwell-and-haswell-corrected-and-released-ubu-update-microcode-teaching |language=zh-tw |date=2018-03-01}}</ref>

英特爾在其新出貨的處理器上內建了對於阻擋利用該類缺陷進行攻擊的微碼更新，並在2018年下半年推出硬體層級上帶特權隔離措施和行程隔離的處理器產品；<ref name="TVRG-20180315">{{cite news |author-last=Warren |author-first=Tom |title=Intel processors are being redesigned to protect against Spectre - New hardware coming later this year |url=https://www.theverge.com/2018/3/15/17123610/intel-new-processors-protection-spectre-vulnerability |date=2018-03-15 |work=[[The_Verge|The Verge]] |access-date=2018-03-15 |dead-url=no |archive-url=https://web.archive.org/web/20180421124711/https://www.theverge.com/2018/3/15/17123610/intel-new-processors-protection-spectre-vulnerability |archive-date=2018-04-21}}</ref><ref name="CNET-20180315">{{cite news |author-last=Shankland |author-first=Stephen |title=Intel will block Spectre attacks with new chips this year - Cascade Lake processors for servers, coming this year, will fight back against a new class of vulnerabilities, says CEO Brian Krzanich. |url=https://www.cnet.com/news/intel-blocks-spectre-attacks-with-new-server-chips-this-year/ |date=2018-03-15 |work=[[CNET|CNET]] |access-date=2018-03-15 |dead-url=no |archive-url=https://web.archive.org/web/20180423050703/https://www.cnet.com/news/intel-blocks-spectre-attacks-with-new-server-chips-this-year/ |archive-date=2018-04-23}}</ref><ref name="TC-20180315">{{cite web |author-last=Coldewey |author-first=Devin |title=Intel announces hardware fixes for Spectre and Meltdown on upcoming chips |url=https://techcrunch.com/2018/03/15/intel-announces-hardware-fixes-for-spectre-and-meltdown-on-upcoming-chips/ |date=2018-03-15 |work=[[TechCrunch|TechCrunch]] |access-date=2018-03-28 |dead-url=no |archive-url=https://web.archive.org/web/20180412164033/https://techcrunch.com/2018/03/15/intel-announces-hardware-fixes-for-spectre-and-meltdown-on-upcoming-chips/ |archive-date=2018-04-12}}</ref><ref>{{cite web |title=硬體修復最實在！Intel 下半年推出處理器將對 Meltdown 與 Spectre variant 2 免疫 |url=https://www.techbang.com/posts/57364-hardware-repair-is-the-most-intel-launches-the-processor-in-the-second-half-will-be-immune-to-meltdown-and-spectre-variant-2 |language=zh-tw |date=2018-03-16}}</ref><ref>{{cite web |title=Intel Cascade Lake 和新系列8th Gen Core将在硬件上修复Spectre #2和Meltdown漏洞 |url=http://www.moepc.net/?post=4587}}</ref>ARM則是發佈了針對受影響處理器核心的韌體修復程式；<ref>{{cite web |title=关于Spectre和Meltdown的一则笑话【Intel，AMD & ARM】【2018开年巨献】 |url=http://www.moepc.net/?post=4048}}</ref>AMD儘管宣稱未受CVE-2017-5715的影響，但仍舊發佈了相應的微碼更新。<ref>{{cite web |title=AMD 處理器安全性 |url=https://www.amd.com/zh-hant/corporate/security-updates |website=AMD |language=zh-hant}}</ref>

=== 其它 ===
在Windows平臺上有第三方軟體可偵測電腦硬體受Spectre、Meltdown影響的程度和修補狀態。<ref>{{cite web |title=你的電腦對 Meltdown 和 Spectre 免疫嗎？快下載 InSpectre 自我檢測 |url=https://www.techbang.com/posts/56338-is-your-computer-immune-to-meltdown-and-spectre-fast-download-inspectre-self-test |language=zh-tw |date=2018-01-18}}</ref><ref>{{cite web |title=InSpectre - Spectre/Meltdown脆弱性に対する対応状況を確認できるWindows用ユーティリティ {{!}} ソフトアンテナブログ |url=https://www.softantenna.com/wp/review/inspectre/ |website=www.softantenna.com |language=ja}}</ref><ref>{{cite web |title=GRC InSpectre |url=https://www.grc.com/inspectre.htm |website=www.grc.com |language=en}}</ref>

== 参考文献 ==
{{Reflist
|colwidth = 30em
|refs =
<ref name="AMD statement">{{cite web |title=An Update on AMD Processor Security |url = https://www.amd.com/en/corporate/speculative-execution |year = 2018 |work=[[超威半导体|超威半导体]]|accessdate=January 4, 2018 |deadurl=no |archiveurl = https://web.archive.org/web/20180104014617/https://www.amd.com/en/corporate/speculative-execution |archivedate=January 4, 2018 }}</ref>
}}

== 外部链接 ==
* [https://meltdownattack.com/ Meltdown和Spectre漏洞的官方网站]
* [https://spectreattack.com/spectre.pdf Spectre论文]
* [https://googleprojectzero.blogspot.co.at/2018/01/reading-privileged-memory-with-side.html Google Project Zero write-up]
* [http://www.tc260.org.cn/upload/2018-01-16/1516081883218060656.pdf 网络安全实践指南—CPU熔断和幽灵漏洞防范指引]{{zh-cn}}

== 参见 ==
* [[熔毁_(安全漏洞)|熔毁 (安全漏洞)]] - 英特尔微处理器中的硬件漏洞，允许未经授权的进程访问特权内存。
* {{le|行锤击|Row hammer}} - 动态随机存取存储器中的意外副作用，导致存储单元之间发生电气相互作用。

{{-}}
{{推測執行漏洞}}
{{Hacking}}

[[Category:電腦安全|Category:電腦安全]]
[[Category:硬件漏洞|Category:硬件漏洞]]
[[Category:旁路攻击|Category:旁路攻击]]
[[Category:X86架構|Category:X86架構]]
[[Category:X86内存管理|Category:X86内存管理]]
[[Category:程式錯誤|Category:程式錯誤]]